#include "TXLib.h"

struct Button
{
int posx, posy;
int sizex, sizey;
COLORREF corolBody;
COLORREF corolFrame;
bool CLick;
double (*func_t) (double x);
void Draw    () const;
void OnCLick (int numb);
void CHeckOnCLick
};

void DrawGraphic    (double (*func) (double x), COLORREF color,
                    double k = 1, double l = 1,
                    double a = 0, double b = 0);

double Sqr          (double x); 
 
 
void SelectWay ();

int main()
    {

    Button Buttons [7] = {{ 10,10, 100, 50, TX_YELLOW, TX_LIGHTGREEN, false, sin},
                          {120,10, 100, 50, TX_YELLOW, TX_LIGHTGREEN, false, c},
                          {230,10, 100, 50, TX_YELLOW, TX_LIGHTGREEN, false},
                          {340,10, 100, 50, TX_YELLOW, TX_LIGHTGREEN, false},
                          {450,10, 100, 50, TX_YELLOW, TX_LIGHTGREEN, false},
                          {560,10, 100, 50, TX_YELLOW, TX_LIGHTGREEN, false},
                          {670,10, 100, 50, TX_YELLOW, TX_LIGHTGREEN, false}};


    txCreateWindow (800, 600);
    txTextCursor (false);
    txBegin ();

    while (!txGetAsyncKeyState (VK_ESCAPE))
        {
        txTextOut   (100, 100, "Выберите способ сортировки от 1 до 5");
        for (int i = 0; i<7; i ++)
            {
            Buttons[i].Draw     ();
            Buttons[i].OnCLick  (i);
            }
        SelectWay ();

        txSleep (0);

        }


    return 0;
    }


void SelectWay ()
    {
    if (txGetAsyncKeyState (0x31))
        {
        txSetFillColor (TX_BLACK);
        txClear     ();
        txTextOut   (300, 400, "Выбран 1 способ сортировки");
        }

    if (txGetAsyncKeyState (0x32))
        {
        txSetFillColor (TX_BLACK);
        txClear     ();
        txTextOut   (300, 400, "Выбран 2 способ сортировки");
        }

    if (txGetAsyncKeyState (0x33))
        {
        txSetFillColor (TX_BLACK);
        txClear     ();
        txTextOut   (300, 400, "Выбран 3 способ сортировки");
        }

    if (txGetAsyncKeyState (0x34))
        {
        txSetFillColor (TX_BLACK);
        txClear     ();
        txTextOut   (300, 400, "Выбран 4 способ сортировки");
        }
    if (txGetAsyncKeyState (0x35))
        {
        txSetFillColor (TX_BLACK);
        txClear     ();
        txTextOut   (300, 400, "Выбран 5 способ сортировки");
        }
    if (txGetAsyncKeyState (VK_SPACE))
        {
        txSetFillColor (TX_BLACK);
        txClear     ();
        }
    }

void Button::Draw () const
    {

    txSetFillColor  (corolBody);
    txSetColor      (corolFrame);
    txRectangle     (posx, posy, posx+sizex, posy+sizey);

    }

void Button::OnCLick (int numb)
    {
    if (txMouseX()>posx && txMouseX()<posx+sizex && txMouseY()>posy && txMouseY()<posy+sizey)
        {
        printf ("Мышь наведена на кнопку %d\n", numb);
        if (txMouseButtons() & 1)
            {
            CLick=true;
            printf ("Нажата кнопка %d\n", numb);
            }
        }
    }

typedef double (*func_t) (double x);

void DrawGraphic (func_t func, COLORREF color,
                    double k, double l,
                    double a, double b)
    {
    txSetColor      (color);
    txSetFillColor  (color);

    double x = -10;
    while (x<= +10)
        {
        double y = k*(*func) (l*x+a)+b;
        /*switch (func)
            {
            case SIN: y = sin (x);break;
            case SQR: y = Sqr (x);break;

            default: printf ("ERROR: DrawGraphic(): Invalid func %d\n", func);
            }*/

        txCircle (400+50*x, 300 - 50*y, 2);

        x += 0.01 ;
        }
    }

double Sqr   (double x) {return x*x;}

void Button:: CHeckOnCLick
    {
    if (CLick)
            {
            DrawGraphic(&sin,   TX_LIGHTGREEN   ,t   , 1        );
            }
    }